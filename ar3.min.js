"use strict";var $navTarget=$(".aside-nav-target-r3");if(0!==$navTarget.length){var constructNote="ar3-aside-nav_done",isConstructed=$("body").hasClass(constructNote),headers=void 0,newHeader=$("body").attr("data-headers-r3"),isValid=void 0!==newHeader;newHeader=isValid?newHeader.split("|"):newHeader,headers=isValid?newHeader:["h1","h2","h3","h4","h5","h6"],isConstructed?$navTarget.parent().children(".r3-aside-nav").remove():($navTarget.wrap("<div class='relative-container-r3'>"),$navTarget.after('<div style="clear:left">'));for(var i=0;i<$navTarget.length;i++){$($navTarget[i]).before('<aside id="r3-aside-nav-'+(i+1)+'" class="r3-aside-nav">');for(var j=0;void 0!==headers[j];){for(var $h=$($navTarget[i]).find(headers[j]),k=0;k<$h.length;k++)$($h[k]).addClass("r3-h"+(j+1)),void 0===$($h[k]).attr("id")&&$($h[k]).attr("id","h"+(j+1)+"-"+(k+1)+"_of_content_"+(i+1));j++}!function(){var e=function(e){return n.append('<a href="#'+e.attr("id")+'">'+e.html()+"</a>")},t=$($navTarget[i]).find(headers.toString()),a=$(t[0]),n=$("#r3-aside-nav-"+(i+1)),o=n;n.append('<a href="#'+a.attr("id")+'">'+a.html()+"</a>");for(var d=a,r=d.attr("class"),s=parseInt(r.slice(4)),c=1;c<t.length;c++){var l=$(t[c]),v=l.attr("class"),u=parseInt(v.slice(4)),m=s-u;0==m?e(l):-1==m?(n.append('<nav class="r3-hierarchy-'+s+'"></nav>'),n=n.find("nav:last-child"),e(l)):0<m&&(n=1==u?o:o.find(".r3-hierarchy-"+(u-1)+":last-child"),e(l)),d=l,s=u}}()}$("body").addClass(constructNote)}var topCoord=function(e){return e.getBoundingClientRect().top+window.scrollY},leftCoord=function(e){return e.getBoundingClientRect().left+window.scrollX},scrollTopCoord=function(){var e=0;return"number"==typeof window.pageYOffset?e=window.pageYOffset:document.body&&document.body.scrollTop?e=document.body.scrollTop:document.documentElement&&document.documentElement.scrollTop&&(e=document.documentElement.scrollTop),e},setLocation=function(e,t){$(e).css({top:topCoord(t[0])+.25*t[0].getBoundingClientRect().height,left:leftCoord(t[0])+t[0].getBoundingClientRect().width})},setButtonLocation=function(){setLocation(".r3-aside-nav-button",$aside)},dynamicAside=function(){var e=topCoord($main[0]),t=e+$main[0].scrollHeight-window.innerHeight;setLocation(".r3-aside-nav-button",$aside),scrollTopCoord()<e?($aside.removeClass("r3-dynamic-on").removeClass("r3-dynamic-after"),$dummy.removeClass("r3-active")):(scrollTopCoord()<t?$aside.removeClass("r3-dynamic-after").addClass("r3-dynamic-on"):$aside.removeClass("r3-dynamic-on").addClass("r3-dynamic-after"),$dummy.addClass("r3-active"))},stopUpdateButton=function(){clearInterval(buttonMove)},$aside=$(".r3-aside-nav");$aside.before('<div class="r3-aside-replacement">');var $dummy=$(".r3-aside-replacement"),$main=$(".aside-nav-target-r3"),$button=$(".r3-aside-nav-button");$button.remove(),$("body").prepend('<a class="r3-aside-nav-button r3-active">&#9664;</a>'),setLocation(".r3-aside-nav-button",$aside),$button=$(".r3-aside-nav-button"),dynamicAside(),document.addEventListener("click",dynamicAside),window.addEventListener("resize",dynamicAside),document.addEventListener("scroll",dynamicAside);var buttonMove=void 0,buttonStop=void 0,marginLeftTransition=500;mainDefaultWidth="79%",$button.click(function(){void 0!==buttonStop&&clearTimeout(buttonStop),$button.toggleClass("r3-active"),$(".r3-aside-nav-button").hasClass("r3-active")?($button.html("&#9664;"),$aside.add($dummy).css("margin-left","0"),$main.css("width",mainDefaultWidth)):($button.html("&#9658;"),$aside.add($dummy).css("margin-left",-1*$aside[0].getBoundingClientRect().width+"px"),$main.css("width","95%")),buttonMove=setInterval(setButtonLocation,1),buttonStop=setTimeout(stopUpdateButton,marginLeftTransition)}),$(".r3-aside-nav").find("a + nav").prev().before('<div class="r3-accordion-B"></div>');